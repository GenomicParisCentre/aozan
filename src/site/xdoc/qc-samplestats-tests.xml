<?xml version="1.0" encoding="UTF-8"?>
<!--
/*
 *                  Aozan development code
 *
 * This code may be freely distributed and modified under the
 * terms of the GNU General Public License version 3 or later
 * and CeCILL. This should be distributed with the code. If you
 * do not have a copy, see:
 *
 *      http://www.gnu.org/licenses/gpl-3.0-standalone.html
 *      http://www.cecill.info/licences/Licence_CeCILL_V2-en.html
 *
 * Copyright for this code is held jointly by the Genomic platform
 * of the Institut de Biologie de l'École Normale Supérieure and
 * the individual authors. These should be listed in @author doc
 * comments.
 *
 * For more information on the Aozan project and its aims,
 * or to join the Aozan Google group, visit the home page at:
 *
 *      http://www.transcriptome.ens.fr/aozan
 *
 */
-->
<document>

  <properties>
    <title>QC samples statistics tests</title>
    <author email="jourdren@biologie.ens.fr">Laurent Jourdren</author>
  </properties>

  <body>

    <section name="Quality control samples statistics tests">		
    	
    	
     <p>User can add samples statistics tests to perform in this steps, if the demultiplexing statistic file is available 
     	and only if the sample sheet file concerne only on project, then the data on the replica in each lane are compiled. 
     	The order of the parameters in the Aozan configuration file will be reused in the report generated by this step.  
     	Each test can use several parameters and contains always an "<b>enable</b>" property to activate the test. 
     	Usually a property named "<b>interval</b>" exists for each test, however if this property is not set, 
     	the value will be computed but not checked if it is the correct interval.
     
     The project tests reuse date collected from samples tests and other quality control tests <a href="qc-samples-tests.html#contamination">
     on detection contamination</a> and <a href="qc-samples-tests.html#recoveryclusters">analysis undetermined clusters</a>
	 Please report to those documentation pages for more information. 
     You will find below all the parameters for all the available tests in Aozan:</p>

       <h4>Configuration project quality tests</h4>
       <table>
         <tr><th>Aozan property</th><th>Type</th><th>Default value</th><th>Description</th></tr>

         
         
         
		<tr><td>qc.test.samplecountproject.enable</td><td>integer interval</td><td>False</td><td>Enable sample count project test</td></tr>
qc.test.samplecountsample.enable=True
		<tr><td>qc.test.rawclusterminproject.enable</td><td>integer interval</td><td>False</td>
			<td>Enable raw cluster minimum count in samples on project test</td></tr>
qc.test.rawclusterminsample.enable=True
		<tr><td>qc.test.rawclustermaxproject.enable</td><td>integer interval</td><td>False</td>
			<td>Enable raw cluster maximum count in samples on project  test</td></tr>
qc.test.rawclustermaxsample.enable=True
		<tr><td>qc.test.rawclustersumproject.enable</td><td>integer interval</td><td>False</td>
			<td>Enable raw cluster minimum sum on project  test</td></tr>
qc.test.rawclustersumsample.enable=True
qc.test.rawclustersumsample.interval=[30000000, ]
		<tr><td>qc.test.pfclusterminproject.enable</td><td>integer interval</td><td>False</td>
			<td>Enable passing filter cluster minimum count in samples on project  test</td></tr>
qc.test.pfclusterminsample.enable=True
		<tr><td>qc.test.pfclustermaxproject.enable</td><td>integer interval</td><td>False</td>
			<td>Enable passing filter cluster minimum count in samples on project  test</td></tr>
qc.test.pfclustermaxsample.enable=True
		<tr><td>qc.test.pfclustersumproject.enable</td><td>integer interval</td><td>False</td>
			<td>Enable passing filter cluster sum on project  test</td></tr>
qc.test.pfclustersumsample.enable=True
qc.test.pfclustersumsample.interval=[30000000, ]

       </table>

       
       <p>
       	Project quality test depend samples tests selected for QC reports. Available, only if at leat one test on 
       	<a href="qc-samples-tests.html#recoveryclusters">analysis undetermined clusters from demultiplexing</a> is selected.
       </p>
       <table>
       	<tr><th>Aozan property</th><th>Type</th><th>Default value</th><th>Description</th></tr>
		<tr><td>qc.test.samplesexceededcontaminationthreshold.enable</td><td>integer interval</td><td>False</td>
			<td>Enable samples excedeed contamination threshold test. Use other quality control test (qc.test.fsqmapped.enable)</td></tr>
qc.test.replicatexceededcontaminationthreshold.enable=True
		<tr><td>qc.test.recoverablepfclusterpercent.enable</td><td>percent</td><td>False</td>
			<td>Enable recoverable passing filter cluster in samples test</td></tr>
		<tr><td>qc.test.recoverablerawclusterpercent.enable</td><td>percent</td><td>False</td>
			<td>Enable recoverable raw cluster in samples test</td></tr>
qc.test.recoveryrawclustersamplestats.enable=True
qc.test.recoverablerawclusterreplicapercent.enable=True
qc.test.recoverypfclustersamplestats.enable=True
qc.test.recoverablepfclusterreplicapercent.enable=True
qc.test.recoverablepfclusterssamplespercent.enable=True
	  </table>
		
		<p>
       	Project quality test depend samples tests selected for QC reports. Available, only if at leat one test on 
       	<a href="qc-samples-tests.html#contamination">contamination detection with FastQ Screen</a> is selected.
       </p>
       <table>
       	<tr><th>Aozan property</th><th>Type</th><th>Default value</th><th>Description</th></tr>
		<tr><td>qc.test.linkprojectreport.enable</td><td>link</td><td>False</td>
			<td>Enable link to detection contamination project report compilation samples data</td></tr>
qc.test.linksamplereport.enable=True
       </table>
               
       <h4>Optional general configuration</h4>
        <p>User can change property on project test configuration .</p>
        <table>
	         <tr><th>Aozan property</th><th>Type</th><th>Default value</th><th>description</th></tr>
	         <tr><td>qc.conf.fastqscreen.project.xsl.file</td><td>string</td><td>Not set</td>
	         	<td>Path to a specific stylesheet file to edit the fastqscreen report html, instead of the file per default</td></tr>
	         <tr><td>qc.conf.fastqscreen.percent.contamination.threshold</td><td>double</td><td>0.10</td>
	         	<td>Threshold to count sample with value for test (qc.test.fsqmapped.enable, mapped read on data set genome contamination.)</td></tr>
	     </table>	
qc.test.passingfilterclusterreplicapercent.enable=True
qc.test.percentsampleinrun.enable=True
qc.test.percentsampleinproject.enable=True
qc.test.percentq30basepf.enable=True
qc.test.percentq30basepf.interval=[0.75, 1.0]
qc.test.meanqualityscorepfsamplestats.enable=True
qc.test.replicatexceededcontaminationthreshold.enable=True
qc.test.hitnolibrariessum.enable=True
qc.test.fsqmappedsum.enable=True
	     
         <tr><td>qc.test.percentq30.enable</td><td>boolean</td><td>False</td><td>Enable percentq30 test</td></tr>
         <tr><td>qc.test.percentq30.interval</td><td>double interval</td><td>False</td><td>Interval for valid values of percentq30</td></tr>
         <tr><td>qc.test.meanqualityscorepf.enable</td><td>boolean</td><td>False</td><td>Enable meanqualityscorepf test</td></tr>
         <tr><td>qc.test.meanqualityscorepf.interval</td><td>double interval</td><td>False</td><td>Interval for valid values of meanqualityscorepf</td></tr>
 
		<tr><th>Aozan property</th><th>Type</th><th>Default value</th>
				<th>Description</th>
			</tr>
			<tr>
				<td>qc.test.hitnolibraries.enable</td>
				<td>boolean</td>
				<td>False</td>
				<td>The report of quality control contains a column with the percent
				of reads mapped at least one reference genomes, except on genome sample test</td>
			</tr>
			<tr>
				<td>qc.test.hitnolibraries.interval</td>
				<td>double interval</td>
				<td>[0, 0.1]</td>
				<td>Interval of valid values</td>
			</tr>
			<tr>
				<td>qc.test.fsqmapped.enable</td>
				<td>boolean</td>
				<td>False</td>
				<td>The report of quality control contains a column with the percent of reads mapped for each reference genome test</td>
			</tr>
			<tr>
				<td>qc.test.fsqmapped.interval</td>
				<td>double interval</td>
				<td>[0, 0.1]</td>
				<td>Interval of valid values. If the genome is this of sample, the interval is reverse (ex: [0.9, 1])</td>
			</tr>
	     
       <p>An example of table built with projects tests.</p>
       <div align="center">
       		<img src="images/qc_project_test.png" alt="example on report with run data" border="1"/>
       </div>

    </section>
  </body>

</document>